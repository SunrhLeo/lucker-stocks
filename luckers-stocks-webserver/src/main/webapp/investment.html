<!DOCTYPE HTML>
<html>
<head>
<title>投资策略</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="keywords" content="Gretong Responsive web template, Bootstrap Web Templates, Flat Web Templates, Android Compatible web template, 
Smartphone Compatible web template, free webdesigns for Nokia, Samsung, LG, SonyEricsson, Motorola web design" />
<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
<!-- Bootstrap Core CSS -->
<link href="css/bootstrap.min.css" rel='stylesheet' type='text/css' />
<!-- Custom CSS -->
<link href="css/style.css" rel='stylesheet' type='text/css' />
<!-- Graph CSS -->
<link href="css/font-awesome.css" rel="stylesheet"> 
<!-- jQuery -->
<link href='http://fonts.useso.com/css?family=Roboto:700,500,300,100italic,100,400' rel='stylesheet' type='text/css'/>
<link href='http://fonts.useso.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
<!-- lined-icons -->
<link rel="stylesheet" href="css/icon-font.min.css" type='text/css' />
<script src="js/simpleCart.min.js"> </script>
<script src="js/echarts.js"></script>
<script src="js/serial.js"></script>	
<script src="js/light.js"></script>	
<!-- //lined-icons -->
<script src="js/jquery-1.10.2.min.js"></script>
   <!--pie-chart--->
<script src="js/pie-chart.js" type="text/javascript"></script>
 <script type="text/javascript">

        $(document).ready(function () {
            $('#demo-pie-1').pieChart({
                barColor: '#3bb2d0',
                trackColor: '#eee',
                lineCap: 'round',
                lineWidth: 8,
                onStep: function (from, to, percent) {
                    $(this.element).find('.pie-value').text(Math.round(percent) + '%');
                }
            });

            $('#demo-pie-2').pieChart({
                barColor: '#fbb03b',
                trackColor: '#eee',
                lineCap: 'butt',
                lineWidth: 8,
                onStep: function (from, to, percent) {
                    $(this.element).find('.pie-value').text(Math.round(percent) + '%');
                }
            });

            $('#demo-pie-3').pieChart({
                barColor: '#ed6498',
                trackColor: '#eee',
                lineCap: 'square',
                lineWidth: 8,
                onStep: function (from, to, percent) {
                    $(this.element).find('.pie-value').text(Math.round(percent) + '%');
                }
            });

           
        });

    </script>
	<style type="text/css">
	/*
 *  Usage:
 *
      <div class="sk-wave">
        <div class="sk-rect sk-rect1"></div>
        <div class="sk-rect sk-rect2"></div>
        <div class="sk-rect sk-rect3"></div>
        <div class="sk-rect sk-rect4"></div>
        <div class="sk-rect sk-rect5"></div>
      </div>
 *
 */
	.sk-wave {
		margin: 200px 100px ;
		width: 1280px;
		height: 100px;
		text-align: center;
		font-size: 10px; }
	.sk-wave .sk-rect {
		background-color: #333;
		height: 100%;
		width: 6px;
		display: inline-block;
		-webkit-animation: sk-waveStretchDelay 1.2s infinite ease-in-out;
		animation: sk-waveStretchDelay 1.2s infinite ease-in-out; }
	.sk-wave .sk-rect1 {
		-webkit-animation-delay: -1.2s;
		animation-delay: -1.2s; }
	.sk-wave .sk-rect2 {
		-webkit-animation-delay: -1.1s;
		animation-delay: -1.1s; }
	.sk-wave .sk-rect3 {
		-webkit-animation-delay: -1s;
		animation-delay: -1s; }
	.sk-wave .sk-rect4 {
		-webkit-animation-delay: -0.9s;
		animation-delay: -0.9s; }
	.sk-wave .sk-rect5 {
		-webkit-animation-delay: -0.8s;
		animation-delay: -0.8s; }

	@-webkit-keyframes sk-waveStretchDelay {
		0%, 40%, 100% {
			-webkit-transform: scaleY(0.4);
			transform: scaleY(0.4); }
		20% {
			-webkit-transform: scaleY(1);
			transform: scaleY(1); } }

	@keyframes sk-waveStretchDelay {
		0%, 40%, 100% {
			-webkit-transform: scaleY(0.4);
			transform: scaleY(0.4); }
		20% {
			-webkit-transform: scaleY(1);
			transform: scaleY(1); } }

</style>
	<style>
	select#selectStock,#selectTime
	{
	width                    : 150pt;
	height                   : 25pt;
	line-height              : 25pt;
	margin-left              : 20px;
	text-indent              : 4pt;
	text-align               : left;
	vertical-align           : middle;
	box-shadow               : none;
	border                   : 1px solid #B52E31;
	-moz-border-radius       : 3px;
	-webkit-border-radius    : 3px;
	border-radius            : 0px;
	-webkit-appearance       : none;
	-moz-appearance          : none;
	appearance               : none;
	font-family              : Arial,  Calibri, Tahoma, Verdana;
	font-size                : 13pt;
	font-weight              : 500;
	color                    : #B52E31;
	cursor                   : pointer;
	outline                  : none;
	}
	select#selectStock,#selectTime option
	{
	padding             : 4px 10px 4px 10px;
	font-size           : 7pt;
	font-weight         : normal;
	}
	select#selectStock,#selectTime option[selected]{ font-weight:bold}
	select#selectStock,#selectTime option:nth-child(even) { background-color:#fff; }
	select#selectStock,#selectTime:hover {font-weight: 700;}
	select#selectStock,#selectTime:focus {box-shadow: none; font-weight: 600;}

	/*LABEL FOR SELECT*/
	label#lblSelect{ position: relative; display: inline-block;}
	/*DOWNWARD ARROW (25bc)*/
	label#lblSelect::after
	{
	content                 : "\25ef";
	position                : absolute;
	top                     : 0;
	right                   : 0;
	bottom                  : 0;
	width                   : 20pt;
	line-height             : 25pt;
	vertical-align          : middle;
	text-align              : center;
	background              : #B52E31;
	color                   : #fff;
	-moz-border-radius       : 0 6px 6px 0;
	-webkit-border-radius    : 0 6px 6px 0;
	border-radius           : 0 0px 0px 0;
	pointer-events          : none;
	}
	/*LABEL FOR SELECT*/
	label#timeSelect{ position: relative; display: inline-block;}
	/*DOWNWARD ARROW (25bc)*/
	label#timeSelect::after
	{
		content                 : "\25ef";
		position                : absolute;
		top                     : 0;
		right                   : 0;
		bottom                  : 0;
		width                   : 20pt;
		line-height             : 25pt;
		vertical-align          : middle;
		text-align              : center;
		background              : #B52E31;
		color                   : #fff;
		-moz-border-radius       : 0 6px 6px 0;
		-webkit-border-radius    : 0 6px 6px 0;
		border-radius           : 0 0px 0px 0;
		pointer-events          : none;
	}
	</style>
</head> 
<body onload="getParam1();initTable();getStockList();getRanking()">

<div style="width: 1280px;height: 720px;background-color: #fff" id="loading">
	<div class="sk-wave">
		<div class="sk-rect sk-rect1"></div>
		<div class="sk-rect sk-rect2"></div>
		<div class="sk-rect sk-rect3"></div>
		<div class="sk-rect sk-rect4"></div>
		<div class="sk-rect sk-rect5"></div>

	</div>
	<!--<input type="button" value="Test" onclick="finishLoading()" style="position: absolute;top: 200px; left: 300px">-->

</div>
<div class="page-container">
	<!--/content-inner-->
	<div class="left-content">
		<div class="inner-content" style="display: none" id="timeToShow">
			<!-- header-starts -->
			<div class="header-section">
				<!-- top_bg -->
				<div class="top_bg">

					<div class="header_top">
						<div class="top_right">
							<ul>
								|
								<li>投资策略</li>
								|
								<li>提示：虚拟投资设置本金100000元</li>
							</ul>
						</div>
						<div class="top_left">
							<div class="login">
								<div id="loginContainer"><span id="username" style="color: white;margin-right:12px"></span><a onclick="logout()" id="logoutButton"  style="float: right;cursor:pointer" ><span>注销</span></a>
								</div>
							</div>
						</div>
						<div class="clearfix"> </div>
					</div>

				</div>
				<!-- //header-ends -->
				<!--content-->
				<div class="content">
					<div class="content">
					</div>
					<div class="women_main">
						<!-- start content -->
						<div class="w_content">
							<!-- grids_of_4 -->
							<div class="grids_of_4">
								<div class="tablepanel-body">
									<div class="table-responsive">
										<table class="table table-striped table-bordered table-hover" id="straTable">
											<thead>
											<tr>
												<th style="width: 100px">策略编号</th>
												<th>策略名称</th>
												<th>应用股票</th>
												<th>开始时间</th>
												<th>结束时间</th>
                                                <th>累计收益</th>
                                                <th>是否应用</th>
												<th>删除策略</th>
											</tr>
											</thead>
											<tbody id="investRow">
											<!--<tr class="odd gradeX">-->
												<!--<td>89685110</td>-->
												<!--<td>宝钢集团</td>-->
												<!--<td>2016-5-25</td>-->
												<!--<td>2016-5-25</td>-->
												<!--<td>2017-5-25</td>-->
												<!--<td>100W</td>-->
												<!--<td><input type="button" value="应用" class="useStraButton"></td>-->
												<!--<td><input type="button" value="删除" class="deleteStraButton"></td>-->
											<!--</tr>-->

											</tbody>
										</table>
									</div>

								</div>
								<div class="clearfix"></div>
							</div>
							<div class="grids_of_4">

								<div class="clearfix"></div>
							</div>
							<div class="grids_of_4">

								<div class="clearfix"></div>
							</div>




							<!-- end grids_of_4 -->


						</div>


						<div class="tab-main">
							<!--/tabs-inner-->
							<div class="tab-inner">
								<script src="js/cbpFWTabs.js"></script>
								<script>
									new CBPFWTabs( document.getElementById( 'tabs' ) );
								</script>
                                <span><input type="text" placeholder="为你的策略起个名字吧!" style="height: 36px" id="sName"></span>
								<span style="margin-left: 5px">
									<label id="lblSelect">
										<select name="moreselAge" id="selectStock" style="font-size: 15px">
								</select>
								</label></span>

								<span style="margin-left: 5px">
									<label id="timeSelect">
										<select name="moreselAge" id="selectTime">
											<option value="1">应用在未来</option>
											<option value="2">应用在过去</option>
										</select>
									</label></span>

								<span style="margin-left: 8px"><input type="text" placeholder="要应用的天数" style="height: 36px" id="sTime"></span>

								<span><input type="button" value="加入策略" class="invest_button" onclick="strategy()"> </span>
								<div class="graph">
									<div class="tabs">
										<nav class="second"> <a><br/>买入</a> <a><br/>卖出</a></nav>
										<div class="context visible">
											<div class="invest_form">
												<form name="buyin">
											<span style="margin-right: 10px">每股价(元) </span><span style="margin-left: 15px"><input type="text" name="priceInLow" VALUE="0"> - <input type="text" name="priceInHigh" VALUE="99999"></span><span style="margin-left: 50px;color:#B52E31; font-size:30px;font-weight: 500">买</span><br/><br/>
											<span style="margin-right: 10px">成交量(万笔) </span><span><input type="text" name="volInLow" VALUE="0"> - <input type="text" name="volInHigh" VALUE="99999"></span><span style="margin-left: 50px;color:#B52E31; font-size:30px;font-weight: 500">入</span><br/><br/>
											<span style="margin-right: 10px">换手率(%) </span><span style="margin-left: 20px"><input type="text" name="changeInLow" value="0"> - <input type="text" name="changeInHigh" VALUE="100"></span><span style="margin-left: 50px;color:#B52E31; font-size:30px;font-weight: 500">策</span><br/><br/>
											<span style="margin-right: 10px">市盈率(%) </span><span style="margin-left: 20px"><input type="text" name="peInLow" value="0"> - <input type="text" name="peInHigh" VALUE="100"></span><span style="margin-left: 50px;color:#B52E31; font-size:30px;font-weight: 500">略</span><br/><br/>
											<span style="margin-right: 10px">市净率(%) </span><span style="margin-left: 20px"><input type="text" name="pbInLow" value="0"> - <input type="text" name="pbInHigh" VALUE="100"></span><span style="margin-left: 50px;color:#B52E31; font-size:30px;font-weight: 500">:D</span>
													</form>
												</div>
										</div>
										<div class="context">
											<div class="invest_form">
												<form name="sellout">
													<span style="margin-right: 10px">每股价(元) </span><span style="margin-left: 15px"><input type="text" name="priceOutLow" VALUE="0"> - <input type="text" name="priceOutHigh" VALUE="99999"></span><span style="margin-left: 50px;color:#B52E31; font-size:30px;font-weight: 500">卖</span><br/><br/>
													<span style="margin-right: 10px">成交量(万笔) </span><span><input type="text" name="volOutLow" VALUE="0"> - <input type="text" name="volOutHigh" VALUE="99999"></span><span style="margin-left: 50px;color:#B52E31; font-size:30px;font-weight: 500">出</span><br/><br/>
													<span style="margin-right: 10px">换手率(%) </span><span style="margin-left: 20px"><input type="text" name="changeOutLow" VALUE="0"> - <input type="text" name="changeOutHigh" VALUE="100"></span><span style="margin-left: 50px;color:#B52E31; font-size:30px;font-weight: 500">策</span><br/><br/>
													<span style="margin-right: 10px">市盈率(%) </span><span style="margin-left: 20px"><input type="text" name="peOutLow" VALUE="0"> - <input type="text" name="peOutHigh" VALUE="100"></span><span style="margin-left: 50px;color:#B52E31; font-size:30px;font-weight: 500">略</span><br/><br/>
													<span style="margin-right: 10px">市净率(%) </span><span style="margin-left: 20px"><input type="text" name="pbOutLow" VALUE="0"> - <input type="text" name="pbOutHigh" VALUE="100"></span><span style="margin-left: 50px;color:#B52E31; font-size:30px;font-weight: 500">:D</span>
													</form>
										</div>
											</div>
									</div>
									<script>
										$(function() {
											$('.tabs nav a').on('click', function() {
												show_content($(this).index());
											});
											show_content(0);

											function show_content(index) {
												// Make the content visible
												$('.tabs .context.visible').removeClass('visible');
												$('.tabs .context:nth-of-type(' + (index + 1) + ')').addClass('visible');

												// Set the tab to selected
												$('.tabs nav.second a.selected').removeClass('selected');
												$('.tabs navnav.second a:nth-of-type(' + (index + 1) + ')').addClass('selected');
											}
										});
									</script>
								</div>
								<div class="tablepanel-body">
									<div class="table-responsive">
										<table class="table table-striped table-bordered table-hover" id="rankingTable">
											<h2>策略英雄榜</h2>
											<thead>
											<tr>
												<th>策略名称</th>
												<th>应用股票</th>
												<th>设计用户</th>
												<th>累计收益</th>
											</tr>
											</thead>
											<tbody id="rankingRow">
											<!--<tr class="odd gradeX">-->
												<!--<td>89685110</td>-->
												<!--<td>宝钢集团</td>-->
												<!--<td>NCH</td>-->
												<!--<td>100W</td>-->
											<!--</tr>-->

											</tbody>
										</table>
									</div>

								</div>

								<div id="datas" style="width: 920px ;height: 500px"></div>

								<div class="clearfix">
								</div>
							</div>
							<!-- end content -->

							<div class="foot-top"></div>
							<div class="col-md-6 s-c">
								<div class="stay">
									<div class="clearfix"> </div>
								</div>
							</div>
						</div>
						<div class="clearfix"> </div>
						<a id="jumpToDetail" href="#datas" style="display:none">点击这里本页跳转</a>
						<div class="footer">
							<!--<div id="K" style="width: 400px; height: 400px"></div>-->
							<div class="clearfix"> </div>
							<p>Copyright &copy; LuckerStock.</p>
						</div>
					</div>
				</div>
				<!--content-->
			</div>
		</div>
		<!--//content-inner-->
		<!--/sidebar-menu-->
		<div class="sidebar-menu">
			<header class="logo1">
				<a href="#" class="sidebar-icon"> <span class="fa fa-bars"></span> </a>
			</header>
			<div style="border-top:1px ridge rgba(255, 255, 255, 0.15)"></div>
			<div class="menu">
				<ul id="menu" >
					<li><a onclick="jumpToRed()"><i class="fa fa-tachometer"></i> <span>首页</span></a></li>
					<li id="menu-academico" ><a href="#" onclick="jumpToMyStocks()"><i class="fa fa-table"></i> <span>个股详情</span> <span class="fa fa-angle-right" style="float: right"></span></a>
						<ul id="menu-academico-sub" >
							<li id="menu-academico-avaliacoes" ><a onclick="jumpToMyStocks()">我的股票</a></li>
							<li id="menu-academico-boletim" ><a onclick="jumpToFavorites()">Luckers推荐</a></li>
						</ul>
					</li>
					<li id="menu-academico" ><a onclick="jumpToAllStocks()"><i class="fa fa-file-text-o"></i> <span>大盘走势</span></a></li>
					<li><a onclick="jumpToInvest()"><i class="lnr lnr-pencil"></i> <span>投资策略</span></a></li>
				</ul>
			</div>
		</div>
		<div class="clearfix"></div>
	</div>
	</div>
	<script>
		var toggle = true;

		$(".sidebar-icon").click(function() {
			if (toggle)
			{
				$(".page-container").addClass("sidebar-collapsed").removeClass("sidebar-collapsed-back");
				$("#menu span").css({"position":"absolute"});
			}
			else
			{
				$(".page-container").removeClass("sidebar-collapsed").addClass("sidebar-collapsed-back");
				setTimeout(function() {
					$("#menu span").css({"position":"relative"});
				}, 400);
			}

			toggle = !toggle;
		});
	</script>
	<!--js -->
	<script src="js/scripts.js"></script>
	<!-- Bootstrap Core JavaScript -->
	<script src="js/bootstrap.min.js"></script>
	<!-- /Bootstrap Core JavaScript -->
	<script src="js/menu_jquery.js"></script>


	<script>
		function jumpToRed(){
//					alert("parm1 is "+parm1);
			window.location.href="red.html?username="+parm1;
		}

		function jumpToMyStocks(){
//					alert("parm1 is "+parm1);
			window.location.href="myStock.html?username="+parm1;
		}

		function jumpToAllStocks(){
			window.location.href="allStocks.html?username="+parm1;
		}

		function jumpToFavorites(){
			window.location.href="luckersFavorite.html?username="+parm1;
		}

		function jumpToIndus(){
			window.location.href="industry.html?username="+parm1;
		}

		function jumpToInvest(){
			window.location.href="investment.html?username="+parm1;
		}
		function logout(){
			window.location.href="index.html";
		}
	</script>
	<script>
		var stockId = "sh600019";
		var stockName="宝钢股份";
		var startType="2016-03-26";
		var endTime="2016-05-25";
		var buyIn="";
		var sellOut="";
		var number;
		var straName="";
		var sNameInput= document.getElementById("sName");
		var stockChoose= document.getElementById("selectStock");
		var TypeChoose = document.getElementById("selectTime");
		var timeChoose= document.getElementById("sTime");


		var parm1;
		var idList=[];
		var nameList=[];

		function getParam1()
		{
//		   alert("init name");
			var url=location.href;
			var tmp1=url.split("?")[1];
			var tmp2=tmp1.split("&")[0];
			var tmp3=tmp2.split("=")[1];
			var tmp4=tmp3.split("#")[0];
			parm1=tmp4;
			var divshow = document.getElementById("username");
//			alert("welcome! "+parm1);
			divshow.innerHTML="Hello! "+parm1;

		}

		var RSName=[];
		var RStock=[];
		var RUser=[];
		var RBenefit=[];

		function getRanking(){
			$.getJSON("ranking", function (JSON) {
				$.each(JSON, function (idx, item) {
					RSName[idx]=item.sname;
					RStock[idx]=item.stockname;
					RUser[idx]=item.userName;
					RBenefit[idx]=item.benefit;

					var row = document.createElement("tr"); //创建行

					var td1 = document.createElement("td"); //创建单元格
					var td2 = document.createElement("td"); //创建单元格
					var td3 = document.createElement("td"); //创建单元格
					var td4 = document.createElement("td"); //创建单元格



					td1.appendChild(document.createTextNode(item.sname));
					td2.appendChild(document.createTextNode(item.stockname));
					td3.appendChild(document.createTextNode(item.userName));
					td4.appendChild(document.createTextNode(item.benefit));


					row.appendChild(td1);
					row.appendChild(td2);
					row.appendChild(td3);
					row.appendChild(td4);

					document.getElementById("rankingRow").appendChild(row); //将行添加到<tbody>中

				});
			});


		}


		function getForm(){
			var indexTime=TypeChoose.selectedIndex ;
			var indexStock=stockChoose.selectedIndex;


			endTime=timeChoose.value;

			startType=TypeChoose.options[indexTime].text;
			var sIdName=stockChoose.options[indexStock].text;
			stockId=sIdName.split("-")[0];
			stockName=sIdName.split("-")[1];

//			stockId=stockChoose.innerText;
//			alert(startType);
//			alert(endTime);
//			alert(stockId);
//			alert(stockName);


			straName=sNameInput.value;
//			alert(straName);

			buyIn+=buyin.priceInLow.value+",";
			buyIn+=buyin.priceInHigh.value+",";
//			alert(buyIn);

			buyIn+=buyin.volInLow.value+",";
			buyIn+=buyin.volInHigh.value+",";

//			alert(buyIn);

			buyIn+=buyin.changeInLow.value+",";
			buyIn+=buyin.changeInHigh.value+",";

//			alert(buyIn);

			buyIn+=buyin.peInLow.value+",";
			buyIn+=buyin.peInHigh.value+",";

//			alert(buyIn);

			buyIn+=buyin.pbInLow.value+",";
			buyIn+=buyin.pbInHigh.value;

//			alert(buyIn);

			sellOut+=sellout.priceOutLow.value+",";
			sellOut+=sellout.priceOutHigh.value+",";

			sellOut+=sellout.volOutLow.value+",";
			sellOut+=sellout.volOutHigh.value+",";

			sellOut+=sellout.changeOutLow.value+",";
			sellOut+=sellout.changeOutHigh.value+",";

			sellOut+=sellout.peOutLow.value+",";
			sellOut+=sellout.peOutHigh.value+",";

			sellOut+=sellout.pbOutLow.value+",";
			sellOut+=sellout.pbOutHigh.value+",";

//			alert("getForm finishes!");

		}

		function strategy(){
			getForm();

//			alert("get url!");
			$.getJSON("strategyVertify", {username:parm1,stockName: stockName,strategyName:straName,stockId: stockId,type:startType,
				days:endTime,buyIn:buyIn,sellOut:sellOut},function (JSON) {
//				alert(JSON.isOK);

				if(JSON.isOK=="false"){
					alert("请输入符合要求的投资策略！");
				}else {
					for (var i = 0; i <= number; i++) {
						document.getElementById("investRow").deleteRow(0);
					}
					initTable();
				}
			});

		}


		function initTable() {

			var tb =  document.getElementById("straTable");

			var rowNum=tb.rows.length;
			for (var i=0;i<rowNum-1;i++)
			{
				tb.deleteRow(1);
//						alert("delete one!");
			}


			var t;
			var eachStock = [];
			var wholeStock = [];
			var ifApply=[];
			var stocks = [];
			$.getJSON("allStrategy", {username: parm1}, function (JSON) {
//				alert(JSON);
				$.each(JSON, function (idx, item) {
					eachStock[0] = item.straName;
//					alert(item.straName);
					eachStock[1] = item.stockid+" "+item.stockName;
					eachStock[2] = item.apply_start;
					eachStock[3] = item.apply_end;
                    eachStock[4] = item.benefit;
					eachStock[5] = item.s_id;
					ifApply[idx] = item.ifApply;
					wholeStock[idx] = eachStock;
					number=idx;

					var btn1 = document.createElement("button");
					btn1.innerText="应用";
					btn1.useit=item.s_id;
					if(item.ifApply=="not") {
						btn1.className = "useStraButton";

					}else{
						btn1.className="disableStraButton";
						btn1.disabled="true";
					}
//					alert(item.s_id);
					btn1.addEventListener("click", function(){
						t=this.useit;
//						alert("sid is "+t);
						useStre(t,parm1);

					});


					var btn2 = document.createElement("button");
					btn2.innerText="删除";
					btn2.dele=item.s_id;
					btn2.className="deleteStraButton";
					btn2.btn_index=idx;
					btn2.addEventListener("click", function(){
						$.getJSON("strategyDelete", {sid: this.dele,username:parm1}, function (JSON) {

//							alert(JSON.Dstate);
							if(JSON.Dstate=="no"){
								alert("删除失败，请重试！");
							}else {
								for (var i = 0; i <= number; i++) {
									document.getElementById("investRow").deleteRow(0);
								}
								initTable();
							}
						});
					});
//				   alert(stocks[idx]);
					var row = document.createElement("tr"); //创建行

					var td1 = document.createElement("td"); //创建单元格
					var td2 = document.createElement("td"); //创建单元格
					var td3 = document.createElement("td"); //创建单元格
					var td4 = document.createElement("td"); //创建单元格
					var td5 = document.createElement("td"); //创建单元格
					var td6 = document.createElement("td"); //创建单元格
					var td7 = document.createElement("td"); //创建单元格
					var td8 = document.createElement("td"); //创建单元格


					td1.appendChild(document.createTextNode(eachStock[0])); //为单元格添加内容
					td2.appendChild(document.createTextNode(eachStock[1])); //为单元格添加内容
					td3.appendChild(document.createTextNode(eachStock[2])); //为单元格添加内容
					td4.appendChild(document.createTextNode(eachStock[3])); //为单元格添加内容
					td5.appendChild(document.createTextNode(eachStock[4])); //为单元格添加内容
					td8.appendChild(document.createTextNode(eachStock[5])); //为单元格添加内容
					td6.appendChild(btn1); //为单元格添加内容
					td7.appendChild(btn2); //为单元格添加内容


					row.appendChild(td8); //将单元格添加到行内
					row.appendChild(td1); //将单元格添加到行内
					row.appendChild(td2); //将单元格添加到行内
					row.appendChild(td3); //将单元格添加到行内
					row.appendChild(td4); //将单元格添加到行内
					row.appendChild(td5); //将单元格添加到行内
					row.appendChild(td6); //将单元格添加到行内
					row.appendChild(td7); //将单元格添加到行内

					document.getElementById("investRow").appendChild(row); //将行添加到<tbody>中

					td1.onclick = function () {
						sNameInput.value=this.parentNode.cells[1].innerText;
						stockChoose.value=this.parentNode.cells[2].innerText;

						getData(this.parentNode.cells[0].innerText);
//					   var showoff = row.getAttribute('id');
//					   alert(showoff);
//					   searchStock(wholeStock[row.id[0]],wholeStock[row.id[1]]);
//					   alert(row.cells[0].innerText);
//					   alert(row.cells[1].innerHTML);
						jumpTo();
					};
					td2.onclick = function () {
						getData(this.parentNode.cells[0].innerText);
						jumpTo();

					};
					td3.onclick = function () {
						getData(this.parentNode.cells[0].innerText);
						jumpTo();					};

					td4.onclick = function () {
						getData(this.parentNode.cells[0].innerText);
						jumpTo();					};

					td5.onclick = function () {
						getData(this.parentNode.cells[0].innerText);
						jumpTo();					};

					td8.onclick = function () {
						getData(this.parentNode.cells[0].innerText);
						jumpTo();					};
				});
//				alert(number);

				finishLoading();

			});
		}
		function jumpTo(){
			document.getElementById("jumpToDetail").click();
		}

		function deleteStre(){
//			alert("delete!");
		}

		function useStre(ttt, uName){
//			alert("use it "+ttt);

//			$.getJSON("strategyApply", {sidd: ttt,username:uName}, function (JSON) {
				getData(ttt);
//			});
//			getData();
		}

		function finishLoading(){
//			alert("finishing loading!");
			var loadingPart = document.getElementById("loading");
			var showPart = document.getElementById("timeToShow");
			showPart.style.display="";
			loadingPart.style.display="none";

		}
	</script>
	<script>

        var dateList=[];
        var perDay=[];
        var total=[];
        function getData(sid) {

			$.getJSON("strategyShow", {sid: sid, userName: parm1}, function (JSON) {
				buyin.priceInLow.value=JSON.a;
				buyin.volInLow.value=JSON.b;
				buyin.changeInLow.value=JSON.c;
				buyin.peInLow.value=JSON.d;
				buyin.pbInLow.value=JSON.e;
				buyIn+=buyin.priceInHigh.value=JSON.f;
				buyIn+=buyin.volInHigh.value=JSON.g;
				buyIn+=buyin.changeInHigh.value=JSON.h;
				buyIn+=buyin.peInHigh.value=JSON.i;
				buyIn+=buyin.pbInHigh.value=JSON.j;

				sellout.priceOutLow.value=JSON.k;
				sellout.volOutLow.value=JSON.l;
				sellout.changeOutLow.value=JSON.m;
				sellout.peOutLow.value=JSON.n;
				sellout.pbOutLow.value=JSON.o;

				sellout.priceOutHigh.value=JSON.p;

				sellout.volOutHigh.value=JSON.q;

				sellout.changeOutHigh.value=JSON.r;

				sellout.peOutHigh.value=JSON.s;

				sellout.pbOutHigh.value=JSON.t;


			});








				$.getJSON("strategyApply", {sidd: sid, username: parm1}, function (JSON) {
                $.each(JSON, function (idx, item) {
                    dateList[idx] = item.date;
                    perDay[idx] = item.single;
                    total[idx] = item.allBenefit;
                });

//                alert(dateList);
//                alert(perDay);
//                alert(total);

                var myChart = echarts.init(document.getElementById('datas'));

                option = {
                    tooltip: {
                        trigger: 'axis'
                    },
                    toolbox: {},
                    legend: {
                        data: ['本日收益', '累计收益']
                    },
                    xAxis: {
                        type: 'category',
                        data: dateList
                    },
                    yAxis: {
                        type: 'value',
                        name: '收益',
                        axisLabel: {
                            formatter: '{value} 元'
                        }
                    },
                    dataZoom: [
                        {
                            show: true,
                            start: 30,
                            end: 100,
                            handleSize: 8
                        },
                        {
                            type: 'inside',
                            start: 30,
                            end: 100
                        }
                    ],
                    series: [
                        {
                            name: '本日收益',
                            type: 'bar',
                            data: perDay
//							,
//						    itemStyle : {
//							  normal : {
//								color : function(params) {
//									if (vols[params.dataIndex] >0) {
//										return '#B52E31';
//									} else {
//										return '#189a24';
//									}
//
//								}
//							}
//						}
                        },
                        {
                            name: '累计收益',
                            type: 'line',
                            data: total
                        }
                    ]
                };
                myChart.setOption(option);
            });
        }
	</script>
    <script>

		var stockId=[];

		function getStockList(){

//			alert(parm1);
			var stockOptions= document.getElementById("selectStock");
			$.getJSON("user", {username: parm1},function (JSON) {
				$.each(JSON, function (idx, item) {

					stockId[idx] = item.stockId + "-" + item.stockName;

				});

//				alert(stockId);

				for (var i = 1; i < stockId.length+1; i++) {
					stockOptions.options.add(new Option(stockId[i-1] ,i));
			}

			});

		}

	</script>




</body>
</html>